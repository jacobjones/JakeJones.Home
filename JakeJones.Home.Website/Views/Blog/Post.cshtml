@using System.Globalization
@model JakeJones.Home.Blog.Implementation.Models.PostViewModel

@{
	ViewData["BodyClass"] = "blog blog--post";

	ViewData["Title"] = Model.Title;
	ViewData["Description"] = Model.Excerpt;
}

<article class="post" itemscope itemtype="http://schema.org/BlogPosting" itemprop="blogPost">
	<header>
		<div class="post-meta">
			@if (Model.PublishDate.HasValue)
			{
				<time datetime="@Model.PublishDate.Value.ToString("s")" itemprop="datePublished">@Model.PublishDate.Value.ToString("MMMM dd, yyyy", new CultureInfo("en-US"))</time>
			}
			@if (User.Identity.IsAuthenticated)
			{
				<a asp-controller="Blog" asp-action="edit" asp-route-id="@Model.Id" title="Edit the post">Edit post</a>
			}
		</div>

		<h1 class="post-title" itemprop="name headline" >@Model.Title</h1>

		<link rel="canonical" href="@Model.AbsoluteUrl">
		<link itemprop="url" href="@Model.AbsoluteUrl">
	</header>

	<div class="post-entry" itemprop="articleBody mainEntityOfPage">
		@Html.Raw(Model.Content)
	</div>

	<footer>
		@*@if (Model.Categories.Any())
		{
			<ul class="categories">
				<li> Posted in </li>
				@foreach (string cat in Model.Categories)
				{
					<li itemprop="articleSection"><a asp-controller="Blog" asp-action="Category" asp-route-category="@cat.ToLowerInvariant()">@cat</a></li>
				}
			</ul>
			<text>and has</text>
		}*@

		@*<a href="@Model.GetLink()#comments" itemprop="discussionUrl" title="Go to the comments section">
			<span itemprop="commentCount">@Model.Comments.Count</span> @(Model.Comments.Count == 1 ? "comment" : "comments")
		</a>*@
		
		<meta itemprop="url" rel="canonical"  />
		<meta itemprop="author" content="Jake Jones" />
		<meta itemprop="dateModified" content="@Model.LastModified.ToString("s")" />
	</footer>
</article>


@*await Html.RenderPartialAsync("_SocialSharing", Model.Title);
await Html.RenderPartialAsync("Comments");

@section Preload {
	@* This lazy loads the stylesheet in a non-render blocking way 
	<link rel="preload" href="~/css/comments.scss" as="style" />
	<noscript><link rel="stylesheet" href="~/css/comments.scss" /></noscript>
}*@


@*@if (User.Identity.IsAuthenticated)
{
	@section Scripts {
		<script src="~/js/admin.js" async defer></script>
		<link rel="stylesheet" href="~/css/admin.scss" />
	}
}*@
